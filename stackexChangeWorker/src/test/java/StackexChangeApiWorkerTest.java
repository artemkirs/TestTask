import com.github.tomakehurst.wiremock.junit5.WireMockRuntimeInfo;
import com.github.tomakehurst.wiremock.junit5.WireMockTest;
import com.painoTT.worker.models.RequestQuestion;
import com.painoTT.worker.models.ResponseQuestion;
import com.painoTT.worker.service.apiWorkers.stackexChange.StackexChangeApiWorker;
import com.painoTT.worker.service.apiWorkers.stackexChange.StackexChangeApiWorkerImpl;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;

import java.util.HashMap;

import static com.github.tomakehurst.wiremock.client.WireMock.*;
import static org.junit.jupiter.api.Assertions.assertNotNull;


@WireMockTest()
public class StackexChangeApiWorkerTest {

    /**
     * Сервист отправки запросов в stackexChange
     */
    private static StackexChangeApiWorker stackexChangeApiWorker;

    /**
     * Объекты для формирования запросов
     */
    private final RequestQuestion requestQuestion1 = new RequestQuestion(new HashMap<>(){{
        put("site", "stackoverflow");
        put("intitle", "javagfhtsxhthse5rg4tw");
    }});
    private final RequestQuestion requestQuestion2 = new RequestQuestion(new HashMap<>(){{
        put("site", "stackoverflow");
        put("intitle", "java");
    }});

    /**
     * Ответы WireMock
     */
    private final String body1 = "{\"items\":[],\"has_more\":false,\"quota_max\":300,\"quota_remaining\":229}";
    private final String body2 = "{\"items\":[{\"tags\":[\"java\",\"maven\",\"ubuntu\",\"visual-studio-code\",\"error-handling\"],\"owner\":{\"account_id\":22652797,\"reputation\":15,\"user_id\":16827160,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a-/AOh14Gg7AUVatzZ3NEXI1P1-GSMcgffinFoqmFp3PKlTQg=k-s256\",\"display_name\":\"Thomas Iskandar\",\"link\":\"https://stackoverflow.com/users/16827160/thomas-iskandar\"},\"is_answered\":false,\"view_count\":15,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645339876,\"creation_date\":1645338031,\"last_edit_date\":1645339876,\"question_id\":71191821,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191821/why-my-java-code-print-something-i-didnt-code\",\"title\":\"Why my Java code print something I didn&#39;t code?\"},{\"tags\":[\"java\"],\"owner\":{\"account_id\":22733705,\"reputation\":1,\"user_id\":16896200,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/b6d2d279f686705a477ffa9f5690de3a?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"ckr\",\"link\":\"https://stackoverflow.com/users/16896200/ckr\"},\"is_answered\":false,\"view_count\":9,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645339078,\"creation_date\":1645339078,\"question_id\":71191913,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191913/java-ee-in-intelli-j\",\"title\":\"Java EE in intelli j\"},{\"tags\":[\"if-statement\"],\"owner\":{\"account_id\":24316549,\"reputation\":11,\"user_id\":18257631,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a/AATXAJwt3qBzz72PHKLUPfMNWeIH3PACwwM8dOOwmFQD=k-s256\",\"display_name\":\"Gyanendra Kumar Dubey\",\"link\":\"https://stackoverflow.com/users/18257631/gyanendra-kumar-dubey\"},\"is_answered\":false,\"view_count\":8,\"answer_count\":3,\"score\":0,\"last_activity_date\":1645338508,\"creation_date\":1645337559,\"last_edit_date\":1645338323,\"question_id\":71191784,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191784/i-am-creating-a-java-program-but-it-is-showing-the-error-else-without-if\",\"title\":\"I am creating a java program but it is showing the error &#39;else&#39; without &#39;if&#39;\"},{\"tags\":[\"java\",\"multithreading\",\"parallel-processing\",\"matrix-multiplication\"],\"owner\":{\"account_id\":5977494,\"reputation\":33,\"user_id\":4697829,\"user_type\":\"registered\",\"accept_rate\":80,\"profile_image\":\"https://www.gravatar.com/avatar/afc432ee2eee0df6a436bc4e5c83e1a0?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"Ali mohammad\",\"link\":\"https://stackoverflow.com/users/4697829/ali-mohammad\"},\"is_answered\":true,\"view_count\":1122,\"accepted_answer_id\":29216505,\"answer_count\":2,\"score\":0,\"last_activity_date\":1645337986,\"creation_date\":1427130777,\"last_edit_date\":1645337986,\"question_id\":29216237,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/29216237/making-a-matrix-multiplication-work-in-parallel-java\",\"title\":\"Making a matrix multiplication work in parallel java\"},{\"tags\":[\"java\",\"multithreading\"],\"owner\":{\"account_id\":4116810,\"reputation\":111,\"user_id\":3378173,\"user_type\":\"registered\",\"accept_rate\":75,\"profile_image\":\"https://i.stack.imgur.com/iFxyz.jpg?s=256&g=1\",\"display_name\":\"Selyst\",\"link\":\"https://stackoverflow.com/users/3378173/selyst\"},\"is_answered\":true,\"view_count\":6816,\"answer_count\":1,\"score\":2,\"last_activity_date\":1645337800,\"creation_date\":1461783948,\"last_edit_date\":1645337800,\"question_id\":36898759,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/36898759/java-parallel-matrix-multiplication\",\"title\":\"Java parallel matrix multiplication\"},{\"tags\":[\"java\",\"firebase\",\"firebase-realtime-database\",\"listener\"],\"owner\":{\"account_id\":23196904,\"reputation\":21,\"user_id\":17292410,\"user_type\":\"registered\",\"profile_image\":\"https://i.stack.imgur.com/FhI17.png?s=256&g=1\",\"display_name\":\"Jalim\",\"link\":\"https://stackoverflow.com/users/17292410/jalim\"},\"is_answered\":false,\"view_count\":6,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645337691,\"creation_date\":1645337691,\"question_id\":71191799,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191799/firebase-realtime-database-listener-in-java-application-doesnt-worknot-android\",\"title\":\"Firebase Realtime Database Listener in Java Application doesn&#39;t work(Not Android)\"},{\"tags\":[\"java\",\"maven\"],\"owner\":{\"account_id\":20889805,\"reputation\":39,\"user_id\":15345469,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/aa0cd944b276808fb75200f9f3527105?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"Stas\",\"link\":\"https://stackoverflow.com/users/15345469/stas\"},\"is_answered\":false,\"view_count\":16,\"answer_count\":1,\"score\":-1,\"last_activity_date\":1645336924,\"creation_date\":1645333986,\"question_id\":71191545,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191545/java-deploy-first-maven-project-failed\",\"title\":\"JAVA deploy first maven project failed\"},{\"tags\":[\"java\",\"kotlin\",\"oop\"],\"owner\":{\"account_id\":24259047,\"reputation\":1,\"user_id\":18208906,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/f2208f0826e0e1c1e0a2d100bc78fe19?s=256&d=identicon&r=PG\",\"display_name\":\"jayfreeman\",\"link\":\"https://stackoverflow.com/users/18208906/jayfreeman\"},\"is_answered\":false,\"view_count\":13,\"answer_count\":0,\"score\":-1,\"last_activity_date\":1645336757,\"creation_date\":1645336757,\"question_id\":71191721,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191721/abstract-lifecycle-in-java\",\"title\":\"Abstract lifecycle in java\"},{\"tags\":[\"java\",\"numbers\"],\"owner\":{\"account_id\":18529782,\"reputation\":1,\"user_id\":13500850,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/817b4025f7e07d76e95f3abbaa627079?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"kaiseasy\",\"link\":\"https://stackoverflow.com/users/13500850/kaiseasy\"},\"is_answered\":false,\"view_count\":20,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645335268,\"creation_date\":1645335268,\"question_id\":71191621,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191621/output-the-history-of-the-game-in-java\",\"title\":\"Output the history of the game in Java\"},{\"tags\":[\"java\",\"android\",\"android-studio\"],\"owner\":{\"account_id\":23471521,\"reputation\":21,\"user_id\":17524957,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a-/AOh14GgNtfAYQApvoBzV7wOuCis0yX8gW_pXIgS8oU_H=k-s256\",\"display_name\":\"Sahil Sharma\",\"link\":\"https://stackoverflow.com/users/17524957/sahil-sharma\"},\"is_answered\":false,\"view_count\":14,\"answer_count\":0,\"score\":1,\"last_activity_date\":1645334994,\"creation_date\":1645334994,\"question_id\":71191602,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191602/how-to-make-one-search-bar-for-multiple-webview-in-android-studio-with-java\",\"title\":\"How to make one search bar for multiple webview in android studio with java?\"},{\"tags\":[\"java\",\"spring-boot\",\"docker\",\"maven\",\"executable-jar\"],\"owner\":{\"account_id\":15649777,\"reputation\":38,\"user_id\":11291380,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/ca77be4655165e266453097bc00a2697?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"Ekestfa\",\"link\":\"https://stackoverflow.com/users/11291380/ekestfa\"},\"is_answered\":false,\"view_count\":9,\"answer_count\":1,\"score\":0,\"last_activity_date\":1645334808,\"creation_date\":1645317108,\"question_id\":71190395,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71190395/docker-spring-boot-maven-plugin-java-jar-classnotfoundexception\",\"title\":\"Docker spring-boot-maven-plugin java jar ClassNotFoundException\"},{\"tags\":[\"java\",\"xml\"],\"owner\":{\"account_id\":9158914,\"reputation\":1,\"user_id\":6810976,\"user_type\":\"registered\",\"profile_image\":\"https://lh5.googleusercontent.com/-Tz9D2HSYH2c/AAAAAAAAAAI/AAAAAAAAAVg/wuGzynio9JE/photo.jpg?sz=256\",\"display_name\":\"Chaos_warfare24\",\"link\":\"https://stackoverflow.com/users/6810976/chaos-warfare24\"},\"is_answered\":false,\"view_count\":11,\"answer_count\":0,\"score\":-2,\"last_activity_date\":1645334543,\"creation_date\":1645334543,\"question_id\":71191573,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191573/parsing-xml-file-in-java-and-need-to-get-tag-name\",\"title\":\"Parsing XML file in java and need to get tag name\"},{\"tags\":[\"java\"],\"owner\":{\"account_id\":24316126,\"reputation\":1,\"user_id\":18257278,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a-/AOh14Giz37WttPqM47hZpDBfVli5sjwo9FjXRYg66028vA=k-s256\",\"display_name\":\"Dennis Garcia\",\"link\":\"https://stackoverflow.com/users/18257278/dennis-garcia\"},\"is_answered\":false,\"view_count\":14,\"answer_count\":0,\"score\":-2,\"last_activity_date\":1645333980,\"creation_date\":1645333207,\"last_edit_date\":1645333980,\"question_id\":71191495,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191495/java-drawline-with-loop-while\",\"title\":\"JAVA drawLine with loop while\"},{\"tags\":[\"java\",\"clojure\"],\"owner\":{\"account_id\":91388,\"reputation\":3963,\"user_id\":250944,\"user_type\":\"registered\",\"accept_rate\":82,\"profile_image\":\"https://www.gravatar.com/avatar/725bf8f1d6111d05c7b7887d7f3ce7da?s=256&d=identicon&r=PG\",\"display_name\":\"Dfr\",\"link\":\"https://stackoverflow.com/users/250944/dfr\"},\"is_answered\":true,\"view_count\":5657,\"accepted_answer_id\":5419767,\"answer_count\":5,\"score\":9,\"last_activity_date\":1645333830,\"creation_date\":1300969901,\"last_edit_date\":1402162453,\"question_id\":5419125,\"content_license\":\"CC BY-SA 3.0\",\"link\":\"https://stackoverflow.com/questions/5419125/reading-a-zip-file-using-java-api-from-clojure\",\"title\":\"Reading a zip file using java api from clojure\"},{\"tags\":[\"java\",\"maven\",\"pdfbox\",\"apache-tika\"],\"owner\":{\"account_id\":8468404,\"reputation\":2185,\"user_id\":6351897,\"user_type\":\"registered\",\"accept_rate\":77,\"profile_image\":\"https://www.gravatar.com/avatar/08910865659aeac8a2a0ac48e572cd41?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"HelloWorld\",\"link\":\"https://stackoverflow.com/users/6351897/helloworld\"},\"is_answered\":true,\"view_count\":64,\"answer_count\":1,\"score\":1,\"last_activity_date\":1645332195,\"creation_date\":1645110631,\"last_edit_date\":1645332195,\"question_id\":71160639,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71160639/jai-i-o-tools-missing-when-java-program-is-run-although-present-during-tests\",\"title\":\"JAI I/O Tools missing when java program is run although present during tests\"},{\"tags\":[\"java\",\"azure-active-directory\",\"msal\",\"msgraph\"],\"owner\":{\"account_id\":24312840,\"reputation\":1,\"user_id\":18254562,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/577028128fb9bbf72d22349653e05c0d?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"codecloud\",\"link\":\"https://stackoverflow.com/users/18254562/codecloud\"},\"is_answered\":false,\"view_count\":4,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645331125,\"creation_date\":1645331125,\"question_id\":71191372,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71191372/ms-graph-user-data-access-from-aad-using-java\",\"title\":\"MS Graph User Data Access from AAD using Java\"},{\"tags\":[\"java\",\"arrays\"],\"owner\":{\"account_id\":5868015,\"reputation\":658,\"user_id\":4621280,\"user_type\":\"registered\",\"accept_rate\":100,\"profile_image\":\"https://i.stack.imgur.com/jkGtw.png?s=256&g=1\",\"display_name\":\"mert d&#246;k&#252;mc&#252;\",\"link\":\"https://stackoverflow.com/users/4621280/mert-d%c3%b6k%c3%bcmc%c3%bc\"},\"is_answered\":true,\"view_count\":1003,\"accepted_answer_id\":29016107,\"answer_count\":3,\"score\":3,\"last_activity_date\":1645330309,\"creation_date\":1426179756,\"last_edit_date\":1645330309,\"question_id\":29015934,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/29015934/how-do-i-take-a-text-file-and-turn-it-into-a-2d-array-in-java\",\"title\":\"How do I take a text file and turn it into a 2D array in Java?\"},{\"tags\":[\"java\"],\"owner\":{\"account_id\":24315782,\"reputation\":1,\"user_id\":18256979,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/372465b60bf978f921796e7f60e6b620?s=256&d=identicon&r=PG\",\"display_name\":\"GG-Bond\",\"link\":\"https://stackoverflow.com/users/18256979/gg-bond\"},\"is_answered\":false,\"view_count\":26,\"closed_date\":1645335057,\"answer_count\":0,\"score\":-2,\"last_activity_date\":1645329828,\"creation_date\":1645328397,\"last_edit_date\":1645329828,\"question_id\":71191197,\"link\":\"https://stackoverflow.com/questions/71191197/method-to-find-same-order-subarray-of-arraylists-in-java\",\"closed_reason\":\"Needs more focus\",\"title\":\"Method to find same order subarray of arrayLists in java\"},{\"tags\":[\"java\",\"sockets\",\"backpressure\"],\"owner\":{\"account_id\":18446741,\"reputation\":1,\"user_id\":13437832,\"user_type\":\"registered\",\"profile_image\":\"https://lh4.googleusercontent.com/-iIcgrVrRMTE/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNmzBjnbrZY6bmv6Nmr04QPHy1m7Q/photo.jpg?sz=256\",\"display_name\":\"kon zu\",\"link\":\"https://stackoverflow.com/users/13437832/kon-zu\"},\"is_answered\":false,\"view_count\":11,\"closed_date\":1645337054,\"answer_count\":0,\"score\":-1,\"last_activity_date\":1645325992,\"creation_date\":1645325992,\"question_id\":71191045,\"link\":\"https://stackoverflow.com/questions/71191045/fire-and-forget-request-and-stream-in-socket-for-java\",\"closed_reason\":\"Needs details or clarity\",\"title\":\"fire and forget, request and stream in Socket for Java\"},{\"tags\":[\"java\",\"dataframe\",\"apache-spark\",\"rdd\"],\"owner\":{\"account_id\":24314401,\"reputation\":1,\"user_id\":18255850,\"user_type\":\"registered\",\"profile_image\":\"https://graph.facebook.com/4708154782630629/picture?type=large\",\"display_name\":\"Anthony Perrotto\",\"link\":\"https://stackoverflow.com/users/18255850/anthony-perrotto\"},\"is_answered\":false,\"view_count\":16,\"answer_count\":1,\"score\":0,\"last_activity_date\":1645325616,\"creation_date\":1645310999,\"question_id\":71189864,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71189864/get-the-last-5-lines-of-a-1000-line-csv-rdd-spark-java\",\"title\":\"Get the last 5 lines of a 1000 line csv, RDD Spark Java\"},{\"tags\":[\"java\",\"android\"],\"owner\":{\"account_id\":22867975,\"reputation\":9,\"user_id\":17011461,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/a348153211ce9906b2d4f6f487c03488?s=256&d=identicon&r=PG\",\"display_name\":\"parham\",\"link\":\"https://stackoverflow.com/users/17011461/parham\"},\"is_answered\":false,\"view_count\":14,\"answer_count\":1,\"score\":0,\"last_activity_date\":1645324996,\"creation_date\":1645318019,\"question_id\":71190469,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71190469/how-change-mobile-clock-in-java\",\"title\":\"How change mobile clock in java\"},{\"tags\":[\"java\",\"serialization\",\"deserialization\",\"classnotfoundexception\"],\"owner\":{\"account_id\":24314867,\"reputation\":1,\"user_id\":18256231,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/fd320b2ee6e007375c49892457ea7842?s=256&d=identicon&r=PG\",\"display_name\":\"hadsag\",\"link\":\"https://stackoverflow.com/users/18256231/hadsag\"},\"is_answered\":false,\"view_count\":15,\"closed_date\":1645322438,\"answer_count\":0,\"score\":-2,\"last_activity_date\":1645324862,\"creation_date\":1645320479,\"last_edit_date\":1645324862,\"question_id\":71190648,\"link\":\"https://stackoverflow.com/questions/71190648/deserializing-instances-of-a-created-class-on-different-computers-java-tcp-serv\",\"closed_reason\":\"Duplicate\",\"title\":\"Deserializing instances of a created class on different computers (Java TCP server/client)\"},{\"tags\":[\"java\"],\"owner\":{\"account_id\":23328029,\"reputation\":1,\"user_id\":17404877,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a-/AOh14Gjdiz054ozpzcNT67kAiXvH7lcBQR0QwE9K5ULaVQ=k-s256\",\"display_name\":\"Fernand Funky\",\"link\":\"https://stackoverflow.com/users/17404877/fernand-funky\"},\"is_answered\":false,\"view_count\":37,\"closed_date\":1645335170,\"answer_count\":1,\"score\":-4,\"last_activity_date\":1645324219,\"creation_date\":1645323298,\"last_edit_date\":1645323692,\"question_id\":71190870,\"link\":\"https://stackoverflow.com/questions/71190870/java-program-that-continues-to-roll-a-dice-until-it-gets-six-ones-in-a-row\",\"closed_reason\":\"Needs more focus\",\"title\":\"Java program that continues to roll a dice until it gets six ones in a row\"},{\"tags\":[\"java\",\"excel\",\"attachment\",\"rest-assured\"],\"owner\":{\"account_id\":14545307,\"reputation\":1,\"user_id\":18220379,\"user_type\":\"registered\",\"profile_image\":\"https://lh4.googleusercontent.com/-a9y3JSL2duA/AAAAAAAAAAI/AAAAAAAAAFU/RJyPmZIVWk0/photo.jpg?sz=256\",\"display_name\":\"sugirtha chandrasekaran\",\"link\":\"https://stackoverflow.com/users/18220379/sugirtha-chandrasekaran\"},\"is_answered\":false,\"view_count\":16,\"answer_count\":1,\"score\":0,\"last_activity_date\":1645321904,\"creation_date\":1645284503,\"last_edit_date\":1645286292,\"question_id\":71186398,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71186398/filenotfoundexception-while-attaching-xlsx-but-not-for-txt-file-in-java-rest-ass\",\"title\":\"FilenotFoundException while attaching xlsx but not for txt file in java/rest assured\"},{\"tags\":[\"javascript\",\"jquery\"],\"owner\":{\"account_id\":22785229,\"reputation\":1,\"user_id\":16940473,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/f8c0d15881e68369c70578cb25e514ad?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"Dion Assydqi\",\"link\":\"https://stackoverflow.com/users/16940473/dion-assydqi\"},\"is_answered\":false,\"view_count\":6,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645321534,\"creation_date\":1645321534,\"question_id\":71190741,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71190741/exit-intent-in-mobile-using-java-scrpt\",\"title\":\"Exit Intent in Mobile using java scrpt\"},{\"tags\":[\"java\",\"bit\"],\"owner\":{\"account_id\":5115176,\"reputation\":377,\"user_id\":4100574,\"user_type\":\"registered\",\"accept_rate\":25,\"profile_image\":\"https://lh5.googleusercontent.com/-WqnuafeaIT0/AAAAAAAAAAI/AAAAAAAAACE/kLTEvxf0bTM/photo.jpg?sz=256\",\"display_name\":\"Yun Li\",\"link\":\"https://stackoverflow.com/users/4100574/yun-li\"},\"is_answered\":true,\"view_count\":9629,\"answer_count\":4,\"score\":10,\"last_activity_date\":1645319057,\"creation_date\":1456122617,\"last_edit_date\":1592644375,\"question_id\":35547114,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/35547114/count-number-of-1-bits-in-java\",\"title\":\"count Number of 1 Bits in java\"},{\"tags\":[\"java\",\"selenium\"],\"owner\":{\"account_id\":18292330,\"reputation\":13,\"user_id\":14585834,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/67121bb9e9985c6e049b799a22e0f330?s=256&d=identicon&r=PG&f=1\",\"display_name\":\"ramej\",\"link\":\"https://stackoverflow.com/users/14585834/ramej\"},\"is_answered\":false,\"view_count\":7,\"answer_count\":0,\"score\":0,\"last_activity_date\":1645318093,\"creation_date\":1645318093,\"question_id\":71190473,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71190473/java-selenium-get-youtube-search\",\"title\":\"Java selenium Get youtube search\"},{\"tags\":[\"java\",\"arrays\",\"split\"],\"owner\":{\"account_id\":24314151,\"reputation\":11,\"user_id\":18255644,\"user_type\":\"registered\",\"profile_image\":\"https://www.gravatar.com/avatar/c68e38899d9ad5753424742d4aaeb4cb?s=256&d=identicon&r=PG\",\"display_name\":\"Ivan\",\"link\":\"https://stackoverflow.com/users/18255644/ivan\"},\"is_answered\":false,\"view_count\":19,\"answer_count\":2,\"score\":1,\"last_activity_date\":1645318034,\"creation_date\":1645309560,\"question_id\":71189731,\"content_license\":\"CC BY-SA 4.0\",\"link\":\"https://stackoverflow.com/questions/71189731/java-splitting-string-into-array\",\"title\":\"Java, splitting string into array\"},{\"tags\":[\"java\"],\"owner\":{\"account_id\":24314790,\"reputation\":1,\"user_id\":18256174,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a-/AOh14GiPWhN8cHonWgl9E813O_mhMc-EE4r_UaJc_bI8hw=k-s256\",\"display_name\":\"Abdulaziz\",\"link\":\"https://stackoverflow.com/users/18256174/abdulaziz\"},\"is_answered\":false,\"view_count\":25,\"closed_date\":1645315842,\"answer_count\":0,\"score\":-5,\"last_activity_date\":1645316224,\"creation_date\":1645315573,\"last_edit_date\":1645316224,\"question_id\":71190272,\"link\":\"https://stackoverflow.com/questions/71190272/i-am-a-beginner-at-java-and-i-need-help-at-this-code\",\"closed_reason\":\"Needs more focus\",\"title\":\"I am a beginner at Java and i need help at this code\"},{\"tags\":[\"java\",\"arrays\",\"iteration\"],\"owner\":{\"account_id\":23392530,\"reputation\":7,\"user_id\":18243130,\"user_type\":\"registered\",\"profile_image\":\"https://lh3.googleusercontent.com/a-/AOh14Gh3EF1usXFKvz2sZQ-dYmskHnQ3BHV75gOkjmQG=k-s256\",\"display_name\":\"Bekhruz Suleymanov\",\"link\":\"https://stackoverflow.com/users/18243130/bekhruz-suleymanov\"},\"is_answered\":false,\"view_count\":33,\"closed_date\":1645320313,\"answer_count\":2,\"score\":-2,\"last_activity_date\":1645315596,\"creation_date\":1645310163,\"last_edit_date\":1645310439,\"question_id\":71189788,\"link\":\"https://stackoverflow.com/questions/71189788/how-to-use-a-arrays-which-was-created-inside-a-for-loop-outside-the-for-loop-in\",\"closed_reason\":\"Needs details or clarity\",\"title\":\"How to use a Arrays which was created inside a for loop, outside the for loop in Java?\"}],\"has_more\":true,\"quota_max\":300,\"quota_remaining\":234}";

    @BeforeAll
    private static void init(){
        stackexChangeApiWorker = new StackexChangeApiWorkerImpl();
    }

    @Test
    void stackexChangeApiWorkerTestWiremock(WireMockRuntimeInfo wmRuntimeInfo) throws Exception {

        int port = wmRuntimeInfo.getHttpPort();

        String uri = "http://localhost:" + port;
        stackexChangeApiWorker.changBaseUri(uri);
        stubFor(get("/search?site=stackoverflow&intitle=javagfhtsxhthse5rg4tw")
                .willReturn(ok(body1)));
        ResponseQuestion byParameters1 = stackexChangeApiWorker.findByParameters(requestQuestion1);

        stubFor(get("/search?site=stackoverflow&intitle=java")
                .willReturn(ok(body2)));
        ResponseQuestion byParameters2 = stackexChangeApiWorker.findByParameters(requestQuestion2);

        assertNotNull(byParameters1);
        assertNotNull(byParameters2);
    }


}
